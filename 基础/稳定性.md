# 稳定性

系统架构-研发流程-团队意识-项目管理

##### 架构：

1. 消除单点：域名解析，SLB，异地多活，中间件，db等主备
2. 分布式环境下的数据一致性： 根据业务特点做强、弱一致选择，CAP
3. 强弱依赖和降级：对弱依赖的自动降级和手动降级，演练。 核心主链路备份（权衡成本）
4. 热点&数据倾斜处理：消息中间件解耦，预热，隔离资源等
5. 涉及到资金链路的，重点考虑资损风险。
6. 离线数据流链路： 链路长数据来源广，数据延迟产出的预案，数据不准的预案，回刷

##### 容量：

1. 提前规划容量（峰值3倍，未来1-	3年），如提前分库分表设计好提前量
2. 容量评估的全链路压测、单接口压测
3. 突发峰值，DDOS攻击的限流
4. 弹性伸缩策略

##### 运维

​	可灰度、可监控、可回滚

1. 灰度发布、引流、白名单等
2. 监控：系统异常类和业务异常类，流量等
3. 回滚：动态切换开关，降级预案演练，快速降级
4. 故障的 1-5-10 （1分钟发现，5分钟定位，10分钟解决），依赖报警监控，日志，动态切换开关和降级等预案

##### 安全

1. 常见安全攻击，水平越权、脚本注入攻击，XSS，XSRF，数据爬取，拖库撞库
2. 引入安全技术同学评估

##### 高质量代码

1. 代码bug引发的很多故障
2. CR
3. 单测，自测，回归测试

#### 研发运维流程机制

1. 技术方案review（代码、设计、安全、资损）
2. CR
3. 单侧，回归测试
4. 发布和审批，发布红线（直接上、不看日志，不看监控）
5. 值班响应机制
6. 问题复盘
7. 稳定性治理专项 （慢sql治理）
8. 演练

